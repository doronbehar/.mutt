# Identity
set imap_user = "doron.behar@gmail.com"
set imap_pass = `pass software/gmail-mutt`
set folder = "imaps://doron.behar@imap.gmail.com/"
set from = "Doron Behar <doron.behar@gmail.com>"
set realname = "Doron Behar"

# Folders
set spoolfile = +INBOX
set record = "+[Gmail]/Sent Mail"
set postponed = "+[Gmail]/Drafts"
set trash = "imaps://imap.gmail.com/[Gmail]/Trash"
set copy = no
set mbox = "imaps://doron.behar@imap.gmail.com/[Gmail]/All Mail"

# User Interface
set imap_check_subscribed = yes
set sidebar_visible
set sidebar_format = "%B%?F? [%F]?%* %?N?%N/?%S"
set sidebar_new_mail_only = no
set sidebar_sort_method = path
set mail_check_stats
set sort = threads
set strict_threads = yes

# Preview Pane
# number of index lines to show
set pager_index_lines = 15
# number of context lines to show
set pager_context = 3
# don't go to next message automatically
set pager_stop = yes
# scroll in menus
set menu_scroll = yes
# show tildes like in vim
set tilde = yes
# no ugly plus signs
set markers = no

# General Settings:
set message_cachedir = ~/.cache/mutt/messages
set header_cache = ~/.cache/mutt
set sendmail = "/usr/bin/msmtp"
set send_charset = "utf-8"
set charset = "utf-8"
auto_view text/html
alternative_order text/plain text/enriched text/html
set pager_stop = yes
set display_filter = "/usr/bin/fribidi"
set query_command = "khard email -p %s"

# Keyboard
## Vim like bindings.
bind pager j next-line
bind pager k previous-line
bind attach,index,pager \CD next-page
bind attach,index,pager \CU previous-page
bind pager g top
bind pager G bottom
bind attach,index g noop
bind attach,index gg first-entry
bind attach,index G last-entry
## Mailboxes
bind index,pager \Ci sidebar-prev
bind index,pager \Cu sidebar-next
bind index,pager \Co sidebar-open
## editor
bind editor <space> noop
bind editor <Tab> complete-query
### Fix backspace
bind editor <backspace> backspace
bind editor <delete> delete-char
## Move messages shortcuts
macro index,pager y "<save-message>=[Gmail]/All Mail<enter><enter>" "Archive message"
macro index,pager d "<save-message>=[Gmail]/Trash<enter><enter>" "Trash message"
## Mailboxes navigation
macro index gi "<change-folder>=INBOX<enter>" "Go to inbox"
macro index gs "<change-folder>=[Gmail]/Starred<enter>" "Go to starred messages"
macro index gt "<change-folder>=[Gmail]/Sent Mail<enter>" "Go to sent mail"
# Different from gmail's web gui's keyboard shortcuts
macro index gp "<change-folder>=[Gmail]/Drafts<enter>" "Go to drafts"
macro index ga "<change-folder>=[Gmail]/All Mail<enter>" "Go to all mail"
# Not available in gmail's web gui's keyboard shortcuts.
macro index gd "<change-folder>=[Gmail]/Trash<enter>" "Go to Trash"
# macro for converting markdown to html using pandoc and webtex
macro compose \Cf "F pandoc -s --webtex -f markdown -t html \ny^T^Utext/html; charset=utf-8\n"
set wait_key=no

# Colors
color hdrdefault blue black
color quoted blue black
color signature blue black
color attachment brightred black
color prompt brightmagenta black
color message brightred black
color error brightred black
color indicator black brightred
color status brightgreen blue
color tree white black
color normal white black
color markers brightred black
color search white black
color tilde brightmagenta black
color index blue black ~F

# color body brightwhite black '\*+[^*]+\*+'
# color body brightwhite black '_+[^_]+_+'
